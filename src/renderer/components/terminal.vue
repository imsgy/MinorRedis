<template>    <el-card class="console" ref="scrollBody">        <div>            <!--头部提示语-->            <li v-for="(v,i) in tips" :key="i">{{v}}<br/></li>            <!--已输入和输出内容展示-->            <div v-for="(item, _) in consoleList">                <el-input                        type="text"                        class="input_text"                        :value="item.input"                        resize="none"                        disabled                >                    <span slot="prepend">Redis-></span>                </el-input>                <pre v-if="item.type === 1" style="color: #FFD700;">{{item.output}}</pre>                <pre v-if="item.type === 2" style="color: #FF4500;">{{item.output}}</pre>            </div>            <!--当前鼠标位置-->            <div>                <el-input                        type="text"                        id="in"                        class="input_text"                        v-model="command"                        resize="none"                        @keyup.enter.native="enter"                        autofocus="autofocus"                        @keyup.up.native="keyUp"                        @keyup.down.native="keyDown"                        ref="typeInput"                >                    <span slot="prepend">Redis-></span>                </el-input>            </div>        </div>    </el-card></template><script>    import api from '../libs/api';    export default {        name: "console",        data() {            return {                tips: [],                command: "",                commandList: [],                keyIndex: 0,                consoleList: [],                useConsole: []            }        },        props: ["server"],        methods: {            initData: function () {                this.tips = [                    "欢迎使用Redis控制台", new Date().format("YYYY-MM-DD HH:mm:ss"),                    `Redis服务器：${this.server.host}:${this.server.port}`, `Redis数据库：${this.server.db}`                ];                this.command = "";                this.keyIndex = 0;                this.commandList = [];                this.consoleList = [];            },            enter: function () {                if (!this.command) {                    return false                }                if (this.command === "clear") {                    this.consoleList = [];                    this.commandList.push("clear");                    this.command = "";                    this.keyIndex = 0;                } else {                    let redisConn = this.$redis(this.server);                    api.RedisCommand(redisConn, this.command).then(res => {                        this.consoleList.push({"input": this.command, "output": res, "type": 1})                    }).catch((err) => {                        this.consoleList.push({"input": this.command, "output": err, "type": 2})                    }).finally(() => {                        let existIndex = this.commandList.indexOf(this.command);                        if (existIndex >= 0) {                            this.commandList.splice(existIndex, 1)                        }                        this.commandList.push(this.command);                        this.command = "";                        this.keyIndex = 0;                        // 自动滚动到光标处                        this.$nextTick(()=>{                            this.$refs.scrollBody.$el.scrollTop = this.$refs.typeInput.$el.offsetTop;                        })                    });                }            },            keyUp: function () {                this.keyIndex = this.keyIndex > 0 ? this.keyIndex - 1 : this.commandList.length - 1;                this.command = this.commandList[this.keyIndex];            },            keyDown: function () {                this.keyIndex = this.commandList.length > this.keyIndex ? this.keyIndex + 1 : 0;                this.command = this.commandList[this.keyIndex];            }        }    }</script><style scoped>    ul {        margin: 0;        padding: 0;        list-style: none;    }    .console {        background: rgb(22, 102, 47);        width: 100%;        height: calc(100vh - 100px);        color: #FFFFFF;        padding-left: 10px;        padding-top: 5px;        overflow-y: scroll;    }    >>> .el-input__inner:focus {        border: 1px solid rgb(22, 102, 47)    }    >>> .el-input__inner:hover {        border: 1px solid rgb(22, 102, 47);    }    >>> .el-input__inner, >>> .el-input.is-disabled .el-input__inner {        color: #ffffff;        font-size: 16px;        border: 1px solid rgb(22, 102, 47);        background-color: rgb(22, 102, 47);        padding-left: 5px;    }    >>> .el-input-group__prepend {        padding: 0;        color: white;        border: 1px solid rgb(22, 102, 47);        background-color: rgb(22, 102, 47);        font-size: 16px;    }    pre{        margin-top: 1px;        margin-bottom: 1px;        font-size: 16px    }</style>