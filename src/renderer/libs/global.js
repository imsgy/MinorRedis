const redis = require('redis');let tools = {    install: null};// Promise 添加finally方法Promise.prototype.finally = function (callback) {    return this.then(        () => Promise.resolve(callback()),        () => Promise.reject(callback())    )};// Date 添加format方法Date.prototype.format = function () {    let month = this.getMonth() + 1;    month = month < 10 ? '0' + month : month;    let day = this.getDate() < 10 ? '0' + this.getDate() : this.getDate();    let hour = this.getHours() < 10 ? '0' + this.getHours() : this.getHours();    let minute = this.getMinutes() < 10 ? '0' + this.getMinutes() : this.getMinutes();    let second = this.getSeconds() < 10 ? '0' + this.getSeconds() : this.getSeconds();    return `${this.getFullYear()}-${month}-${day} ${hour}:${minute}:${second}`};tools.install = function (Vue) {    Vue.prototype.$layer_message = function (message, type) {        this.$message({            showClose: true,            duration: 5000,            message: message,            type: type || 'error'        })    };    // 全局redis链接    Vue.prototype.$redis = function (server) {        let option = {            host: server.host,            port: server.port,            password: server.password,            db: server.db,            retry_strategy: function (options) {                if (options.error && options.error.code === "ECONNREFUSED") {                    return new Error("The server refused the connection");                }                if (options.total_retry_time > 1000 * 60 * 60) {                    return new Error("Retry time exhausted");                }                if (options.attempt > 10) {                    return undefined;                }                return Math.min(options.attempt * 100, 3000);            },        };        let client = redis.createClient(option);        client.on("ready", function () {            console.log("Redis连接成功");        });        client.on("error", function (err) {            alert(err.toString());            client.quit();        });        client.on("end", function () {            console.log("Redis断开连接");        });        return client    };};export default tools;